<!doctype html><html lang=en><head><meta name=google-site-verification content="NTPifZ1gNpp6HSoC60ErvHiUUor86ZXg4yHtlpk9lwU"><title>Andrea Dainese > Set up the first laboratory on EVE-NG</title><meta charset=utf-8><meta name=author content="Andrea Dainese"><meta name=description content="In the realm of automation, each laboratory we will create requires a feature as basic as it is essential: the IP addresses of the devices must be accessible from the automation system."><meta name=generator content="Hugo 0.115.3"><meta name=“robots” content="“noarchive”"><meta name=“robots” content="“notranslate”"><meta name=robots content="noimageindex"><meta property="og:title" content="Set up the first laboratory on EVE-NG"><meta property="og:description" content="In the realm of automation, each laboratory we will create requires a feature as basic as it is essential: the IP addresses of the devices must be accessible from the automation system."><meta property="og:type" content="article"><meta property="og:url" content="https://www.adainese.it/blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/"><meta property="og:image" content="https://www.adainese.it/images/vendors/eve-ng.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-09-30T00:00:00+00:00"><meta property="article:modified_time" content="2023-09-30T00:00:00+00:00"><meta property="og:site_name" content="Andrea Dainese"><meta name=twitter:card content="summary"><meta name=twitter:site content="@adainese"><meta name=twitter:image content="https://www.adainese.it/images/vendors/eve-ng.png"><meta name=twitter:title content="Andrea Dainese > Set up the first laboratory on EVE-NG"><meta name=twitter:description content="In the realm of automation, each laboratory we will create requires a feature as basic as it is essential: the IP addresses of the devices must be accessible from the automation system."><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate type=application/rss+xml title="RSS Feed for blog" href=/blog/index.xml><link rel=dns-prefetch href=https://www.googletagmanager.com><link href=https://www.googletagmanager.com rel=preconnect crossorigin><link rel=apple-touch-icon sizes=57x57 href=/favicon/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/favicon/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/favicon/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/favicon/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/favicon/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/favicon/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/favicon/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/favicon/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-192x192.png><link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon/favicon-96x96.png><link rel=stylesheet type=text/css href=/plugins/fontawesome/css/all.min.css><link rel=stylesheet type=text/css href=/plugins/fancybox/jquery.fancybox.min.css><link rel=stylesheet type=text/css href=/fonts/opensans/opensans.css><link rel=stylesheet href=/css/style.min.db8a68dfac8ad6ed301e5f04872a83daee269833ef371fd9ec9475b745de14e5.css integrity="sha256-24po36yK1u0wHl8EhyqD2u4mmDPvNx/Z7JR1t0XeFOU="><link rel=stylesheet href=/css/print.min.a3802e6b39df8780c4980151b47550b34687a140e148c71342fb463b5322e6b1.css media=print integrity="sha256-o4Auaznfh4DEmAFRtHVQs0aHoUDhSMcTQvtGO1Mi5rE="></head><body><button type=button class="mobile-nav-toggle d-lg-none" aria-label="Toggle navigation"><i class="fas fa-bars"></i></button><header id=header class=fixed-top><div class="container d-flex"><div class="logo mr-auto"><h1><a href=/#><span>Andrea</span> Dainese</a></h1></div><nav class="nav-menu d-none d-lg-block"><ul><li><a href=/#>Home</a></li><li><a href=/#about>About</a></li><li class=active><a href=/blog>Blog</a></li><li><a href=/categories>Categories</a></li><li><a href=https://www.patreon.com/adainese target=_blank rel=noreferrer><i class="fa fa-heart"></i></a></li><li><a href=https://www.spreaker.com/podcast/info-sec-unplugged--6025156 target=_blank rel=noreferrer><i class="fa fa-podcast"></i></a></li><li><form class="form-inline ml-2" action=/search><div class="input-group mb-3"><input id=search-query type=text class=form-control placeholder=Search... name=s aria-label="Search within the website" aria-describedby=basic-addon2><div class=input-group-append><button class="btn btn-outline-primary" type=submit aria-label=Search>
<i class="fa fa-search"></i></button></div></div></form></li></ul></nav></div></header><div id=page-header><div class=home-overlay></div><div class=container><div class=row><div class=col-12><div class="page-header-size text-center"><h1>Set up the first laboratory on EVE-NG</h1></div></div></div></div></div><main id=main><div class=blogpost-single><div class=container><div class=row><div class="col-xs-12 col-sm-12 col-md-4 d-print-none"><div class=blogpost-nav><div class="d-none d-md-block"><div class=blogpost-nav-content><h4>Table of contents</h4><div class=toce><nav id=TableOfContents><ul><li><a href=#eve-ng-networking>EVE-NG Networking</a></li><li><a href=#enabling-dhcp>Enabling DHCP</a></li><li><a href=#accessing-the-internet>Accessing the Internet</a></li><li><a href=#supported-devices>Supported Devices</a></li><li><a href=#creare-il-primo-laboratorio>Creare il primo laboratorio</a></li></ul></nav></div></div></div><div class="d-none d-md-block"><div class=blogpost-nav-content><h4>Latest posts</h4><div class=recent-post><div class=recent-post-img><a href=/blog/2025/10/12/frameworks-for-projects-with-cisco-aci-and-ndo/><img class="img-fluid rounded" src=/images/vendors/cisco.webp alt="Post cover"></a></div><div class=recent-post-content><p><a href=/blog/2025/10/12/frameworks-for-projects-with-cisco-aci-and-ndo/>Frameworks for Projects with Cisco ACI and NDO</a><br><i class="fa fa-calendar"></i>
October 12, 2025</p></div></div><div class=recent-post><div class=recent-post-img><a href=/blog/2025/10/05/creating-an-interface-in-strata-cloud-manager/><img class="img-fluid rounded" src=/images/vendors/paloalto.webp alt="Post cover"></a></div><div class=recent-post-content><p><a href=/blog/2025/10/05/creating-an-interface-in-strata-cloud-manager/>Creating an interface in Strata Cloud Manager</a><br><i class="fa fa-calendar"></i>
October 05, 2025</p></div></div><div class=recent-post><div class=recent-post-img><a href=/blog/2025/10/01/circular-dependencies-with-ndo/><img class="img-fluid rounded" src=/images/categories/learning-paths.webp alt="Post cover"></a></div><div class=recent-post-content><p><a href=/blog/2025/10/01/circular-dependencies-with-ndo/>Circular Dependencies with NDO</a><br><i class="fa fa-calendar"></i>
October 01, 2025</p></div></div><div class=recent-post><div class=recent-post-img><a href=/blog/2025/09/28/modifying-an-object-in-strata-cloud-manager/><img class="img-fluid rounded" src=/images/vendors/paloalto.webp alt="Post cover"></a></div><div class=recent-post-content><p><a href=/blog/2025/09/28/modifying-an-object-in-strata-cloud-manager/>Modifying an object in Strata Cloud Manager</a><br><i class="fa fa-calendar"></i>
September 28, 2025</p></div></div><div class=recent-post><div class=recent-post-img><a href=/blog/2025/09/24/from-single-site-to-multi-site-with-ndo/><img class="img-fluid rounded" src=/images/categories/learning-paths.webp alt="Post cover"></a></div><div class=recent-post-content><p><a href=/blog/2025/09/24/from-single-site-to-multi-site-with-ndo/>From Single-Site to Multi-Site with NDO</a><br><i class="fa fa-calendar"></i>
September 24, 2025</p></div></div></div></div><div class="d-none d-md-block"><div class=blogpost-nav-content><h4>Categories</h4><div class=recent-post><div class=recent-post-img><a href=/categories/automation><img class="img-fluid rounded" src=/images/categories/automation.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/automation>Automation</a><br><i class="fa fa-blog"></i> 162 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/learning-paths><img class="img-fluid rounded" src=/images/categories/learning-paths.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/learning-paths>Learning paths</a><br><i class="fa fa-blog"></i> 126 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/ciso><img class="img-fluid rounded" src=/images/categories/ciso.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/ciso>CISO</a><br><i class="fa fa-blog"></i> 23 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/personal-security><img class="img-fluid rounded" src=/images/categories/personal-security.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/personal-security>Personal Security</a><br><i class="fa fa-blog"></i> 22 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/security><img class="img-fluid rounded" src=/images/categories/security.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/security>Security</a><br><i class="fa fa-blog"></i> 20 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/notes><img class="img-fluid rounded" src=/images/categories/notes.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/notes>Notes</a><br><i class="fa fa-blog"></i> 19 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/infrastructure><img class="img-fluid rounded" src=/images/categories/infrastructure.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/infrastructure>Infrastructure</a><br><i class="fa fa-blog"></i> 12 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/ot-ics><img class="img-fluid rounded" src=/images/categories/ot-ics.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/ot-ics>OT/ICS</a><br><i class="fa fa-blog"></i> 5 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/books><img class="img-fluid rounded" src=/images/categories/books.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/books>Books</a><br><i class="fa fa-blog"></i> 3 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/unetlab><img class="img-fluid rounded" src=/images/categories/unetlab.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/unetlab>UNetLab</a><br><i class="fa fa-blog"></i> 3 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/writeup><img class="img-fluid rounded" src=/images/categories/writeup.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/writeup>Write-up</a><br><i class="fa fa-blog"></i> 3 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/osint><img class="img-fluid rounded" src=/images/categories/osint.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/osint>OSInt</a><br><i class="fa fa-blog"></i> 2 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/life><img class="img-fluid rounded" src=/images/categories/life.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/life>My life</a><br><i class="fa fa-blog"></i> 1 posts</p></div></div></div></div></div></div><div class="col-xs-12 col-sm-12 col-md-8 blogpost-container"><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><article><div class=blogpost-single-content><h2>Set up the first laboratory on EVE-NG</h2><div class=blogpost-single-meta><div><i class="fa fa-user"></i> Andrea Dainese</div><div><i class="fa fa-calendar"></i>
September 30, 2023</div><div class=tag-meta><i class="fa fa-folder"></i>
<a href=/categories/automation/ title="All posts under Automation">Automation</a></div></div><div class=entry-content><div><a data-fancybox=gallery href=/images/vendors/eve-ng.webp><img class="img-fluid w-25 rounded shadow float-right" src=/images/vendors/eve-ng.webp alt="Post cover"></a></div><p>In the realm of automation, each laboratory we will create requires a feature as basic as it is essential: the IP addresses of the devices must be accessible from the automation system. While the <a href=https://www.eve-ng.net/index.php/features-compare/ title="EVE-NG editions">EVE-NG PRO</a> version offers a native feature (NAT Cloud) that simplifies this process, with <a href=https://www.eve-ng.net/index.php/features-compare/ title="EVE-NG editions">EVE-NG CE</a> we need to devise a strategy to achieve the same outcome.</p><p>Our goal is to configure an additional network on <a href=https://www.eve-ng.net/ title=EVE-NG>EVE-NG</a> that allows us to connect the management interfaces of the devices we will use for our labs, whether they are virtual (internal to <a href=https://www.eve-ng.net/ title=EVE-NG>EVE-NG</a>) or physical (PLCs and other external physical devices). The diagram below (attached1) summarizes our objective:</p><p><a data-fancybox=gallery href=/blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/topology.png><img sizes="362 " srcset=/blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/topology.png src=/blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/topology.png alt="Lab topology" class="img-fluid rounded shadow mx-auto d-block text-center"></a></p><h2 id=eve-ng-networking>EVE-NG Networking</h2><p>First and foremost, we need to understand how networking works in <a href=https://www.eve-ng.net/ title=EVE-NG>EVE-NG</a>, and this provides an opportunity to introduce some Linux concepts in general.</p><p>In a Linux system, network interfaces are represented by various names, typically prefixed with &ldquo;eth&rdquo; or &ldquo;ens&rdquo; followed by an identifier number. These interfaces can represent either physical network cards or virtual network cards. In our environment, we&rsquo;ll find that the physical network card is represented by eth0, while there are other network cards named pnet.</p><p>We can view the network interfaces of the system using one of the following commands:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ifconfig -a
</span></span><span style=display:flex><span>ip link
</span></span></code></pre></div><p>The configured pnet interfaces are actually virtual switches (bridges) set up by default during installation:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo brctl show
</span></span><span style=display:flex><span>bridge name bridge id       STP enabled interfaces
</span></span><span style=display:flex><span>pnet0       8000.0050568a6a54   no      eth0
</span></span><span style=display:flex><span>pnet1       8000.000000000000   no
</span></span><span style=display:flex><span>pnet2       8000.000000000000   no
</span></span><span style=display:flex><span>pnet3       8000.000000000000   no
</span></span><span style=display:flex><span>pnet4       8000.000000000000   no
</span></span><span style=display:flex><span>pnet5       8000.000000000000   no
</span></span><span style=display:flex><span>pnet6       8000.000000000000   no
</span></span><span style=display:flex><span>pnet7       8000.000000000000   no
</span></span><span style=display:flex><span>pnet8       8000.000000000000   no
</span></span><span style=display:flex><span>pnet9       8000.000000000000   no
</span></span></code></pre></div><p>In particular, we see that the bridge <code>pnet0</code> is associated with the physical interface <code>eth0</code>. In other words, anything associated with the bridge <code>pnet0</code> will also be transmitted over the network <code>eth0</code>. As we&rsquo;ll see in the web interface, we can add Cloud networks. Cloud networks are nothing but the <code>pnet</code> bridges. Specifically, the <code>pnet0</code> network is also used for web access. In fact, the management IP address is associated with the bridge <code>pnet0</code>, as we can see using one of the following commands:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ifconfig pnet0
</span></span><span style=display:flex><span>ip address show pnet0
</span></span></code></pre></div><p>We can then configure an IP address on the pnet9 network and connect the management interfaces of the devices to the <code>Cloud9</code> network.</p><p><a href=https://www.eve-ng.net/ title=EVE-NG>EVE-NG</a>, che è basata su Ubuntu 20, configura le reti tramite il file <code>/etc/network/interfaces</code>. In particolare dobbiamo configurare la parte relativa al bridge <code>pnet9</code> come segue:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span># Cloud devices
</span></span><span style=display:flex><span>auto pnet9
</span></span><span style=display:flex><span>iface pnet9 inet static
</span></span><span style=display:flex><span>    address 169.254.1.1
</span></span><span style=display:flex><span>    netmask 255.255.255.0
</span></span><span style=display:flex><span>    bridge_ports none
</span></span><span style=display:flex><span>    bridge_stp off
</span></span></code></pre></div><p>We use the <a href=https://it.wikipedia.org/wiki/Indirizzo_link_local title="Link Local address">APIPA</a> network, which is defined to be local. In this sense, within an enterprise context, we have a reasonable certainty of not overlapping with other networks. The remaining interfaces pnet2-9 can be deleted.</p><p>We can now reload the modified network configuration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo /etc/init.d/networking restart
</span></span></code></pre></div><p>If we ever want to associate a physical interface with this bridge, we need to add the line:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>bridge_ports eth1
</span></span></code></pre></div><h2 id=enabling-dhcp>Enabling DHCP</h2><p>For convenience, we choose to automatically assign IP addresses to the network interfaces connected to the <code>Cloud9</code> network. To do this, we use the DHCP protocol via <a href=https://thekelleys.org.uk/dnsmasq/doc.html title=Dnsmasq>Dnsmasq</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>sudo apt-get install -y dnsmasq
</span></span></code></pre></div><p>The configuration of <a href=https://thekelleys.org.uk/dnsmasq/doc.html title=Dnsmasq>Dnsmasq</a>) is done through the configuration file <code>/etc/dnsmasq.conf</code>. Specifically, we want to have only the DHCP service active and only for the network managed by the interface <code>pnet9</code>. The configuration is as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>port=0
</span></span><span style=display:flex><span>interface=pnet9
</span></span><span style=display:flex><span>dhcp-range=169.254.1.2,169.254.1.254,3650d
</span></span><span style=display:flex><span>log-dhcp
</span></span></code></pre></div><p>Finally, restart the service with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl restart dnsmasq
</span></span></code></pre></div><p>As we&rsquo;ll see later for the automation part, we need a stable association between the IP addresses of the devices and the devices themselves. Therefore, we cannot rely on a dynamic mapping provided by <a href=https://thekelleys.org.uk/dnsmasq/doc.html title=Dnsmasq>Dnsmasq</a>, but we must define it statically. We can map the hostname with which the device will present itself during the DHCP request and statically map it to <a href=https://thekelleys.org.uk/dnsmasq/doc.html title=Dnsmasq>Dnsmasq</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>dhcp-host=SW1,169.254.1.101
</span></span><span style=display:flex><span>dhcp-host=SW2,169.254.1.102
</span></span><span style=display:flex><span>dhcp-host=SW3,169.254.1.103
</span></span><span style=display:flex><span>dhcp-host=SW4,169.254.1.104
</span></span></code></pre></div><p>The list should be completed with all the names we will use in this and future labs.</p><h2 id=accessing-the-internet>Accessing the Internet</h2><p>To complete our environment, the <code>Cloud9</code> network must be able to access the Internet. In other words, outgoing traffic must be masked (via NAT) using the IP address configured on the <code>pnet0</code> interface.</p><p>First, we need to enable routing by modifying the file <code>/etc/sysctl.conf</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>net.ipv4.ip_forward=1
</span></span></code></pre></div><p>Enable the setting by executing:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo sysctl -p
</span></span></code></pre></div><p>Then, configure NAT using IPTables to mask outgoing traffic with the address of <code>pnet0</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo iptables -t nat -A POSTROUTING -o pnet0 -j MASQUERADE
</span></span></code></pre></div><p>To save the changes, use:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install -y iptables-persistent
</span></span><span style=display:flex><span>sudo iptables-save &gt; /etc/iptables/rules.v4
</span></span></code></pre></div><p>Although not necessary, it&rsquo;s recommended to reboot the system to ensure everything is configured correctly.</p><h2 id=supported-devices>Supported Devices</h2><p><a href=https://www.eve-ng.net/ title=EVE-NG>EVE-NG</a> supports a wide range of devices and is generally capable of running almost any x86-based device. For more information, refer to the <a href=https://www.eve-ng.net/index.php/documentation/supported-images/ title="Supported images">Supported images</a> containing the list of supported devices.</p><p>For lab portability, and thus for easy lab usage, it&rsquo;s important to use the correct name. Otherwise, you will need to modify the lab by assigning the correct images before launching it.</p><p>Copy the contents of the <code>iol</code> directory to the directory <code>/opt/unetlab/addons/iol</code>. This can be done using <a href=https://www.putty.org/ title=PuTTY>PuTTY</a> or <a href=https://winscp.net/ title=WinSCP>WinSCP</a> (Windows) or directly with SSH (Mac):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>scp i86bi_linux_l- root@172.25.82.222:/opt/unetlab/addons/iol/bin/
</span></span><span style=display:flex><span>scp iourc root@172.25.82.222:/opt/unetlab/addons/iol/bin/
</span></span></code></pre></div><p>Then, on the <a href=https://www.eve-ng.net/ title=EVE-NG>EVE-NG</a> machine, execute:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo /opt/unetlab/wrappers/unl_wrapper -a fixpermissions
</span></span></code></pre></div><h2 id=creare-il-primo-laboratorio>Creare il primo laboratorio</h2><p>The final step is to create the first actual laboratory. Connect to the EVE-NG machine via Web by selecting the Html5 console mode at login:</p><ul><li>Go to <code>Add new lab</code>;</li><li>Add a network by going to <code>Add an object</code> -> <code>Network</code> on the right</li></ul><p><a data-fancybox=gallery href=/blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/eve-ng-cloud.png><img sizes="500 600 " srcset="/blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/eve-ng-cloud_hu2947138d6764c80226617c21b89efdad_21366_500x0_resize_box_3.png /blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/eve-ng-cloud.png" src=/blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/eve-ng-cloud.png alt="Create a Cloud network" class="img-fluid rounded shadow mx-auto d-block text-center"></a></p><ul><li>Add an IOL node by going to <code>Add an object</code> -> <code>Node</code></li></ul><p><a data-fancybox=gallery href=/blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/eve-ng-router.png><img sizes="500 600 " srcset="/blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/eve-ng-router_hua0c51f0eb6ba38a14bd29d42bcf31c10_52300_500x0_resize_box_3.png /blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/eve-ng-router.png" src=/blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/eve-ng-router.png alt="Create a node" class="img-fluid rounded shadow mx-auto d-block text-center"></a></p><ul><li>Connect router R1:e0/0 to the Internet network</li></ul><p><a data-fancybox=gallery href=/blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/eve-ng-link.png><img sizes="500 598 " srcset="/blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/eve-ng-link_hu04b931a0c1a7b2792bdafd1baf4bffc7_33484_500x0_resize_box_3.png /blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/eve-ng-link.png" src=/blog/2023/09/30/set-up-the-first-laboratory-on-eve-ng/eve-ng-link.png alt="Connect a node" class="img-fluid rounded shadow mx-auto d-block text-center"></a></p><ul><li>Start router R1 by going to <code>More actions</code> -> <code>Start all nodes</code> on the right</li></ul><p>Then, access the console of router R1 and configure it as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>username admin privilege 15 password cisco
</span></span><span style=display:flex><span>hostname R1
</span></span><span style=display:flex><span>ip domain-name example.com
</span></span><span style=display:flex><span>interface Ethernet0/0
</span></span><span style=display:flex><span>  ip address dhcp
</span></span><span style=display:flex><span>  no shutdown
</span></span><span style=display:flex><span>crypto key generate rsa modulus 2048
</span></span><span style=display:flex><span>ip ssh version 2
</span></span><span style=display:flex><span>line vty 0 4
</span></span><span style=display:flex><span>  transport input ssh
</span></span><span style=display:flex><span>  login local
</span></span></code></pre></div><p>If our environment configuration has been done correctly, we should:</p><ul><li>See an IP address configured on R1:e0/0</li><li>Be able to connect to R1 from the <a href=https://www.eve-ng.net/ title=EVE-NG>EVE-NG</a> machine</li></ul><p>When connecting to R1 via SSH, we might encounter the following error:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Unable to negotiate with 169.254.1.186 port 22: no matching key exchange method found. Their offer: diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1
</span></span></code></pre></div><p>The reason is that the image used by R1 is outdated and still uses protocols considered obsolete and insecure. On the <a href=https://www.eve-ng.net/ title=EVE-NG>EVE-NG</a> machine, we need to enable in the file <code>/root/.ssh/config</code> some obsolete and insecure configurations (to be done in a test environment but not in production):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>KexAlgorithms diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1
</span></span><span style=display:flex><span>HostKeyAlgorithms ssh-rsa,ssh-dss
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Host *
</span></span><span style=display:flex><span>    ServerAliveInterval 5
</span></span><span style=display:flex><span>    ServerAliveCountMax 3
</span></span></code></pre></div><p>At this point, we should be able to connect to R1 via SSH.</p><p>The final test that validates our environment is to ping from R1 to an Internet address, for example, 8.8.8.8:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>R1#ping 8.8.8.8
</span></span><span style=display:flex><span>Type escape sequence to abort.
</span></span><span style=display:flex><span>Sending 5, 100-byte ICMP Echos to 8.8.8.8, timeout is 2 seconds:
</span></span><span style=display:flex><span>!!!!!
</span></span><span style=display:flex><span>Success rate is 100 percent (5/5), round-trip min/avg/max = 11/11/12 ms
</span></span></code></pre></div></div></div></article><div class=clear></div></div></div></div></div></div></div></main><footer class=d-print-none><div class=footer-profile><div class=container id=contact><div class=row><div class="col-xs-12 col-sm-12 col-md-4"><div class=footer-head><h2><span>Andrea</span> Dainese</h2></div><p>For information, collaborations, proposals, requests for help, donations, use one of the following channels; email is preferred.</p><div class=footer-icons><ul><li><a href=https://www.patreon.com/adainese title="Support me" target=_blank rel=noreferrer><i class="fa fa-heart"></i></a></li><li><a href=https://www.linkedin.com/in/adainese/ title="LinkedIn profile" target=_blank rel=noreferrer><i class="fab fa-linkedin-in"></i></a></li><li><a href=https://twitter.com/adainese title="Twitter profile" target=_blank rel=noreferrer><i class="fab fa-twitter"></i></a></li><li><a href=mailto:andrea@adainese.it title="Secure email" target=_blank rel=noreferrer><i class="fa fa-envelope"></i></a></li><li><a href=https://www.spreaker.com/podcast/info-sec-unplugged--6025156 title=Podcast target=_blank rel=noreferrer><i class="fa fa-podcast"></i></a></li><li><a href=https://github.com/dainok/ title="GitHub repositories" target=_blank rel=noreferrer><i class="fab fa-github"></i></a></li><li><a href=/blog/index.xml title="RSS Feed" target=_blank><i class="fa fa-rss"></i></a></li></ul></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class=footer-head><h4>Past events</h4></div><div class=footer-content><ul><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20240305-cisco-aci-automation.pdf title="View slides" target=_blank rel=noreferrer>SDN: Software Defined Now</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20231122-cybercrime.pdf title="View slides" target=_blank rel=noreferrer>Cybercrime</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20220901-bgp-attack-scenarios.pdf title="View slides" target=_blank rel=noreferrer>BGP attack scenarios</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20220317-approaching-ot-ics-security.pdf title="View slides" target=_blank rel=noreferrer>Approaching OT/ICS Security</a> (with <a href=https://www.festocte.it/eventi/industry_4_0/17-03-2022/webinar_la_cybersecurity_nelle_reti_di_fabbrica_P/>Festo Academy</a>)</li><li><a href="https://www.youtube.com/watch?v=sjQZghTkHkA" title="View recording" target=_blank rel=noreferrer><i class="fa fa-video"></i></a>&nbsp;-&nbsp;<a href=/files/slides/20200922-cyberrange.pdf title="View slides" target=_blank rel=noreferrer>Cyber Range: Analyzing a Cyber Attack</a></li><li><a href="https://www.youtube.com/watch?v=-PWtGaS28dk" title="View recording" target=_blank rel=noreferrer><i class="fa fa-video"></i></a>&nbsp;-&nbsp;<a href=/files/slides/20200623-clubitfvg-securing-ot-ics-plants.pdf title="View slides" target=_blank rel=noreferrer>Securing OT/ICS plants</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20190226-automation-for-cisco-netops.pdf title="View slides" target=_blank rel=noreferrer>Automation for Cisco NetOps</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20181107-ciscon-sdn-complexity-and-tco-looking-for-an-easy-way.pdf title="View slides" target=_blank rel=noreferrer>SDN, Complexity and TCO</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20181003-nts-protection-and-visibility-for-enterprise-networks.pdf title="View slides" target=_blank rel=noreferrer>Protection and visibility for enterprise networks</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20141106-festival-ict-why-wan-accelerators-still-matter.pdf title="View slides" target=_blank rel=noreferrer>Why WAN AccelerAtors (still) matter?</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20130918-festival-ict-designing-an-hybrid-data-center-infrastructure.pdf title="View slides" target=_blank rel=noreferrer>Designing an Hybrid Data Center Infrastructure</a></li></ul></div></div><div class="d-none d-md-block col-md-4"><div class=footer-head><h4>Competencies</h4></div><div class=footer-slides><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/security-125x100.webp alt="Incident Response"><div class=overlay>Incident Response</div></div></div><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/ciso-125x100.webp alt=Advisor><div class=overlay>Advisor</div></div></div><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/osint-125x100.webp alt="Open Source Intelligence (OSINT)"><div class=overlay>Open Source Intelligence (OSINT)</div></div></div><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/infrastructure-125x100.webp alt="System Integration / Automation"><div class=overlay>System Integration / Automation</div></div></div><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/writeup-125x100.webp alt="Training / Education / Cyber Range"><div class=overlay>Training / Education / Cyber Range</div></div></div><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/personal-security-125x100.webp alt="Personal Security"><div class=overlay>Personal Security</div></div></div></div></div></div></div></div><div class=footer-copyright><div class=container><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class=text-center>&copy; Copyright <strong>Andrea Dainese</strong>. All Rights Reserved</div><div class=text-center>Designed by <a href=https://bootstrapmade.com/ title=BootstrapMade target=_blank rel=noreferrer>BootstrapMade</a></div></div></div></div></div></footer><script src=/plugins/jquery/jquery.min.js></script>
<script src=/plugins/bootstrap/js/bootstrap.min.js></script>
<script src=/plugins/fancybox/jquery.fancybox.min.js></script>
<script src=/plugins/goodshare/goodshare.min.js></script>
<script src=/plugins/fuse/fuse.min.js></script>
<script src=/plugins/jquery-mark/jquery.mark.min.js></script>
<script src=/js/main.js></script>
<script src=/js/search.js></script></body></html>