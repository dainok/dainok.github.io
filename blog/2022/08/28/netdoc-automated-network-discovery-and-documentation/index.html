<!doctype html><html lang=en><head><meta name=google-site-verification content="NTPifZ1gNpp6HSoC60ErvHiUUor86ZXg4yHtlpk9lwU"><title>Andrea Dainese > NetDoc: automated network discovery and documentation</title><meta charset=utf-8><meta name=author content="Andrea Dainese"><meta name=description content="Years ago I worked on a data center migration project. I was in charge to review network documentation, and automating the configuration, testing, and migration phases. There is no chance to review dozens of switches manually, so I wrote some Python scripts to get neighborship and configuration from switches, drawing Visio diagrams."><meta name=generator content="Hugo 0.115.3"><meta name=“robots” content="“noarchive”"><meta name=“robots” content="“notranslate”"><meta name=robots content="noimageindex"><meta property="og:title" content="NetDoc: automated network discovery and documentation"><meta property="og:description" content="Years ago I worked on a data center migration project. I was in charge to review network documentation, and automating the configuration, testing, and migration phases. There is no chance to review dozens of switches manually, so I wrote some Python scripts to get neighborship and configuration from switches, drawing Visio diagrams."><meta property="og:type" content="article"><meta property="og:url" content="https://www.adainese.it/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/"><meta property="og:image" content="https://www.adainese.it/cables.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2022-08-28T00:00:00+00:00"><meta property="article:modified_time" content="2022-08-28T00:00:00+00:00"><meta property="og:site_name" content="Andrea Dainese"><meta name=twitter:card content="summary"><meta name=twitter:site content="@adainese"><meta name=twitter:image content="https://www.adainese.itcables.png"><meta name=twitter:title content="Andrea Dainese > NetDoc: automated network discovery and documentation"><meta name=twitter:description content="Years ago I worked on a data center migration project. I was in charge to review network documentation, and automating the configuration, testing, and migration phases. There is no chance to review dozens of switches manually, so I wrote some Python scripts to get neighborship and configuration from switches, drawing Visio diagrams."><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate type=application/rss+xml title="RSS Feed for blog" href=/blog/index.xml><link rel=dns-prefetch href=https://www.googletagmanager.com><link href=https://www.googletagmanager.com rel=preconnect crossorigin><link rel=apple-touch-icon sizes=57x57 href=/favicon/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/favicon/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/favicon/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/favicon/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/favicon/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/favicon/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/favicon/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/favicon/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-192x192.png><link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon/favicon-96x96.png><link rel=stylesheet type=text/css href=/plugins/fontawesome/css/all.min.css><link rel=stylesheet type=text/css href=/plugins/fancybox/jquery.fancybox.min.css><link rel=stylesheet type=text/css href=/fonts/opensans/opensans.css><link rel=stylesheet href=/css/style.min.db8a68dfac8ad6ed301e5f04872a83daee269833ef371fd9ec9475b745de14e5.css integrity="sha256-24po36yK1u0wHl8EhyqD2u4mmDPvNx/Z7JR1t0XeFOU="><link rel=stylesheet href=/css/print.min.a3802e6b39df8780c4980151b47550b34687a140e148c71342fb463b5322e6b1.css media=print integrity="sha256-o4Auaznfh4DEmAFRtHVQs0aHoUDhSMcTQvtGO1Mi5rE="></head><body><button type=button class="mobile-nav-toggle d-lg-none" aria-label="Toggle navigation"><i class="fas fa-bars"></i></button><header id=header class=fixed-top><div class="container d-flex"><div class="logo mr-auto"><h1><a href=/#><span>Andrea</span> Dainese</a></h1></div><nav class="nav-menu d-none d-lg-block"><ul><li><a href=/#>Home</a></li><li><a href=/#about>About</a></li><li class=active><a href=/blog>Blog</a></li><li><a href=/categories>Categories</a></li><li><a href=https://www.patreon.com/adainese target=_blank rel=noreferrer><i class="fa fa-heart"></i></a></li><li><a href=https://www.spreaker.com/podcast/info-sec-unplugged--6025156 target=_blank rel=noreferrer><i class="fa fa-podcast"></i></a></li><li><form class="form-inline ml-2" action=/search><div class="input-group mb-3"><input id=search-query type=text class=form-control placeholder=Search... name=s aria-label="Search within the website" aria-describedby=basic-addon2><div class=input-group-append><button class="btn btn-outline-primary" type=submit aria-label=Search>
<i class="fa fa-search"></i></button></div></div></form></li></ul></nav></div></header><div id=page-header><div class=home-overlay></div><div class=container><div class=row><div class=col-12><div class="page-header-size text-center"><h1>NetDoc: automated network discovery and documentation</h1></div></div></div></div></div><main id=main><div class=blogpost-single><div class=container><div class=row><div class="col-xs-12 col-sm-12 col-md-4 d-print-none"><div class=blogpost-nav><div class="d-none d-md-block"><div class=blogpost-nav-content><h4>Table of contents</h4><div class=toce><nav id=TableOfContents><ul><li><a href=#install>Install</a></li><li><a href=#usage>Usage</a></li><li><a href=#additional-info>Additional info</a></li><li><a href=#l2-network-topology>L2 Network topology</a></li><li><a href=#l3-network-topology>L3 Network topology</a></li><li><a href=#conclusions>Conclusions</a></li></ul></nav></div></div></div><div class="d-none d-md-block"><div class=blogpost-nav-content><h4>Latest posts</h4><div class=recent-post><div class=recent-post-img><a href=/blog/2025/10/05/creating-an-interface-in-strata-cloud-manager/><img class="img-fluid rounded" src=/images/vendors/paloalto.webp alt="Post cover"></a></div><div class=recent-post-content><p><a href=/blog/2025/10/05/creating-an-interface-in-strata-cloud-manager/>Creating an interface in Strata Cloud Manager</a><br><i class="fa fa-calendar"></i>
October 05, 2025</p></div></div><div class=recent-post><div class=recent-post-img><a href=/blog/2025/10/01/circular-dependencies-with-ndo/><img class="img-fluid rounded" src=/images/categories/learning-paths.webp alt="Post cover"></a></div><div class=recent-post-content><p><a href=/blog/2025/10/01/circular-dependencies-with-ndo/>Circular Dependencies with NDO</a><br><i class="fa fa-calendar"></i>
October 01, 2025</p></div></div><div class=recent-post><div class=recent-post-img><a href=/blog/2025/09/28/modifying-an-object-in-strata-cloud-manager/><img class="img-fluid rounded" src=/images/vendors/paloalto.webp alt="Post cover"></a></div><div class=recent-post-content><p><a href=/blog/2025/09/28/modifying-an-object-in-strata-cloud-manager/>Modifying an object in Strata Cloud Manager</a><br><i class="fa fa-calendar"></i>
September 28, 2025</p></div></div><div class=recent-post><div class=recent-post-img><a href=/blog/2025/09/24/from-single-site-to-multi-site-with-ndo/><img class="img-fluid rounded" src=/images/categories/learning-paths.webp alt="Post cover"></a></div><div class=recent-post-content><p><a href=/blog/2025/09/24/from-single-site-to-multi-site-with-ndo/>From Single-Site to Multi-Site with NDO</a><br><i class="fa fa-calendar"></i>
September 24, 2025</p></div></div><div class=recent-post><div class=recent-post-img><a href=/blog/2025/09/21/retrieving-firewall-interfaces-with-strata-cloud-manager/><img class="img-fluid rounded" src=/images/vendors/paloalto.webp alt="Post cover"></a></div><div class=recent-post-content><p><a href=/blog/2025/09/21/retrieving-firewall-interfaces-with-strata-cloud-manager/>Retrieving firewall interfaces with Strata Cloud Manager</a><br><i class="fa fa-calendar"></i>
September 21, 2025</p></div></div></div></div><div class="d-none d-md-block"><div class=blogpost-nav-content><h4>Categories</h4><div class=recent-post><div class=recent-post-img><a href=/categories/automation><img class="img-fluid rounded" src=/images/categories/automation.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/automation>Automation</a><br><i class="fa fa-blog"></i> 160 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/learning-paths><img class="img-fluid rounded" src=/images/categories/learning-paths.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/learning-paths>Learning paths</a><br><i class="fa fa-blog"></i> 124 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/ciso><img class="img-fluid rounded" src=/images/categories/ciso.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/ciso>CISO</a><br><i class="fa fa-blog"></i> 23 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/personal-security><img class="img-fluid rounded" src=/images/categories/personal-security.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/personal-security>Personal Security</a><br><i class="fa fa-blog"></i> 22 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/security><img class="img-fluid rounded" src=/images/categories/security.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/security>Security</a><br><i class="fa fa-blog"></i> 20 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/notes><img class="img-fluid rounded" src=/images/categories/notes.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/notes>Notes</a><br><i class="fa fa-blog"></i> 19 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/infrastructure><img class="img-fluid rounded" src=/images/categories/infrastructure.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/infrastructure>Infrastructure</a><br><i class="fa fa-blog"></i> 12 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/ot-ics><img class="img-fluid rounded" src=/images/categories/ot-ics.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/ot-ics>OT/ICS</a><br><i class="fa fa-blog"></i> 5 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/books><img class="img-fluid rounded" src=/images/categories/books.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/books>Books</a><br><i class="fa fa-blog"></i> 3 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/unetlab><img class="img-fluid rounded" src=/images/categories/unetlab.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/unetlab>UNetLab</a><br><i class="fa fa-blog"></i> 3 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/writeup><img class="img-fluid rounded" src=/images/categories/writeup.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/writeup>Write-up</a><br><i class="fa fa-blog"></i> 3 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/osint><img class="img-fluid rounded" src=/images/categories/osint.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/osint>OSInt</a><br><i class="fa fa-blog"></i> 2 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/life><img class="img-fluid rounded" src=/images/categories/life.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/life>My life</a><br><i class="fa fa-blog"></i> 1 posts</p></div></div></div></div></div></div><div class="col-xs-12 col-sm-12 col-md-8 blogpost-container"><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><article><div class=blogpost-single-content><h2>NetDoc: automated network discovery and documentation</h2><div class=blogpost-single-meta><div><i class="fa fa-user"></i> Andrea Dainese</div><div><i class="fa fa-calendar"></i>
August 28, 2022</div><div class=tag-meta><i class="fa fa-folder"></i>
<a href=/categories/automation/ title="All posts under Automation">Automation</a></div></div><div class=entry-content><div><a data-fancybox=gallery href=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/cables.webp><img class="img-fluid w-25 rounded shadow float-right" src=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/cables.webp alt="Post cover"></a></div><p>Years ago I worked on a data center migration project. I was in charge to review network documentation, and automating the configuration, testing, and migration phases. There is no chance to review dozens of switches manually, so I wrote some
<a href=https://www.adainese.it/blog/2017/03/28/automatic-network-discovery-and-documentation/ title="Python scripts">Python scripts</a>
to get neighborship and configuration from switches, drawing Visio diagrams. In the end, I was able to discover an entire network topology in minutes.</p><p>NetDoc would be the industrialized, open-source tool available to the public to discover multi-vendor networks. It&rsquo;s based on <a href=https://docs.netbox.dev/en/stable/ title=Netbox>Netbox</a>, <a href=https://github.com/ktbyers/netmiko title=Netmiko>Netmiko</a>, <a href=https://nornir.readthedocs.io/en/latest/ title=nornir>nornir</a>, <a href=https://github.com/networktocode/ntc-templates title=ntc-templates>ntc-templates</a>, and <a href=https://github.com/mattieserver/netbox-topology-views title=netbox-topologyi-views>netbox-topologyi-views</a>.</p><p>A next step would see <a href=https://app.diagrams.net/ title=draw.io>draw.io</a> integrated into netbox-topology-views to export diagrams in a reusable format.</p><h2 id=install>Install</h2><p>NetDoc requires a working netbox instance. Please see <a href=https://docs.netbox.dev/en/stable/ title=Netbox>how to install netbox</a>, then see <a href=https://github.com/dainok/netdoc title=NetDoc>how to install NetDoc</a>. In this post, I&rsquo;m using netbox 3.3.2.</p><p>If you find it useful, don&rsquo;t forget to <a href=https://www.patreon.com/adainese title="Andrea Dainese on Patreon">sponsor</a> it.</p><h2 id=usage>Usage</h2><p>Once we logged in we have to create a site. Then go to <code>Plugins</code> -> <code>Netdoc</code> -> <code>Credentials</code> and add or import all credentials used to log in to network devices. We can also import via CSV using the following format:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>name,username,password,enable_password
</span></span><span style=display:flex><span>ssh-admin-w-enable,admin,C1sco123,C1sco123
</span></span><span style=display:flex><span>ssh-admin-wo-enable,admin,C1sco123,
</span></span></code></pre></div><p>Then we need to add/import at least one discoverable. A discoverable is a network node NetDoc can retrieve information from. Again we can import via CSV using the following format:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>address,credential,mode,site
</span></span><span style=display:flex><span>172.25.82.38,ssh-admin-w-enable,netmiko_cisco_nxos,Test Site
</span></span><span style=display:flex><span>172.25.82.37,ssh-admin-w-enable,netmiko_cisco_nxos,Test Site
</span></span><span style=display:flex><span>172.25.82.36,ssh-admin-w-enable,netmiko_cisco_nxos,Test Site
</span></span><span style=display:flex><span>172.25.82.35,ssh-admin-w-enable,netmiko_cisco_nxos,Test Site
</span></span></code></pre></div><p>We need to edit those devices and make them discoverable. We can now start the discovery, selecting one or more discoverable and pressing the button.</p><p><a data-fancybox=gallery href=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/discoverables-1.webp><img sizes="800 863 " srcset="/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/discoverables-1_hude6f416bc44131e22b59b8e90a789e27_16504_800x0_resize_q75_h2_box_2.webp /blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/discoverables-1.webp" src=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/discoverables-1.webp alt=Discoverables class="img-fluid rounded shadow mx-auto d-block text-center"></a></p><p>We can follow the discovery process using <code>journalctl</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># journalctl -u netbox-rq -f</span>
</span></span><span style=display:flex><span>Aug <span style=color:#ae81ff>28</span> 19:54:55 linux-station python3<span style=color:#f92672>[</span>306570<span style=color:#f92672>]</span>: multiple_tasks*******************
</span></span><span style=display:flex><span>***********************************************
</span></span><span style=display:flex><span>Aug <span style=color:#ae81ff>28</span> 19:54:55 linux-station python3<span style=color:#f92672>[</span>306570<span style=color:#f92672>]</span>: * 172.25.82.35 ** changed : False
</span></span><span style=display:flex><span> **********************************************
</span></span><span style=display:flex><span>Aug <span style=color:#ae81ff>28</span> 19:54:55 linux-station python3<span style=color:#f92672>[</span>306570<span style=color:#f92672>]</span>: vvvv multiple_tasks ** changed :
</span></span><span style=display:flex><span>False vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv INFO
</span></span><span style=display:flex><span>Aug <span style=color:#ae81ff>28</span> 19:54:55 linux-station python3<span style=color:#f92672>[</span>306570<span style=color:#f92672>]</span>: ---- show running-config ** chang
</span></span><span style=display:flex><span>ed : False ------------------------------------ INFO
</span></span><span style=display:flex><span>Aug <span style=color:#ae81ff>28</span> 19:54:55 linux-station python3<span style=color:#f92672>[</span>306570<span style=color:#f92672>]</span>: Building configuration...
</span></span><span style=display:flex><span>Aug <span style=color:#ae81ff>28</span> 19:54:55 linux-station python3<span style=color:#f92672>[</span>306570<span style=color:#f92672>]</span>:
</span></span><span style=display:flex><span>Aug <span style=color:#ae81ff>28</span> 19:54:55 linux-station python3<span style=color:#f92672>[</span>306570<span style=color:#f92672>]</span>: Current configuration : <span style=color:#ae81ff>3662</span> bytes
</span></span><span style=display:flex><span>Aug <span style=color:#ae81ff>28</span> 19:54:55 linux-station python3<span style=color:#f92672>[</span>306570<span style=color:#f92672>]</span>: !
</span></span><span style=display:flex><span>Aug <span style=color:#ae81ff>28</span> 19:54:55 linux-station python3<span style=color:#f92672>[</span>306570<span style=color:#f92672>]</span>: ! Last configuration change at 12:00:59 UTC Wed Jul <span style=color:#ae81ff>13</span> <span style=color:#ae81ff>2022</span>
</span></span><span style=display:flex><span>Aug <span style=color:#ae81ff>28</span> 19:54:55 linux-station python3<span style=color:#f92672>[</span>306570<span style=color:#f92672>]</span>: !
</span></span><span style=display:flex><span>Aug <span style=color:#ae81ff>28</span> 19:54:55 linux-station python3<span style=color:#f92672>[</span>306570<span style=color:#f92672>]</span>: version 15.2
</span></span></code></pre></div><p>The discovery scripts should populate the following netbox items:</p><ul><li>Devices</li><li>Manufacturers</li><li>Interfaces</li><li>Cables</li><li>IP Addresses</li><li>Prefixes</li><li>VRFs</li><li>VLANs</li></ul><p>Moreover, new discoverables detected via CDP/LLDP protocols will be automatically added: they can be discovered after reviewing the IP address and the discovery method.</p><p><a data-fancybox=gallery href=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/discoverables-2.webp><img sizes="800 855 " srcset="/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/discoverables-2_huf4612aa5c2fc1f453f477f77895745be_27282_800x0_resize_q75_h2_box_2.webp /blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/discoverables-2.webp" src=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/discoverables-2.webp alt="New discoverables" class="img-fluid rounded shadow mx-auto d-block text-center"></a></p><p>The discovery process should bind a Device to each discoverable, but in case this is not happening (e.g. Cisco XR) we can bind them manually.</p><h2 id=additional-info>Additional info</h2><p>NetDoc will also discovers ARP Table, MAC Address Table, Routing Table from each discoverable.</p><p><a data-fancybox=gallery href=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/mac-address-table.png><img sizes="800 858 " srcset="/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/mac-address-table_hu89e45239db03f5c067fbc7c378c115bb_31205_800x0_resize_box_3.png /blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/mac-address-table.png" src=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/mac-address-table.png alt="MAC Address Table" class="img-fluid rounded shadow mx-auto d-block text-center"></a></p><p>Finally, all data (logs) fetched by discoverables are stored and can be reviewed:</p><ul><li>Configuration bit is set if the log contains the discoverable configuration.</li><li>Success bit is set if the command has returned a valid output.</li><li>Parsed bit is set if the output has been successfully parsed.</li><li>Ingested bit is set if the parsed output has been ingested to netbox.</li></ul><p><a data-fancybox=gallery href=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/logs.png><img sizes="800 843 " srcset="/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/logs_hu05a1dea01247a282e6f97287962eceba_34689_800x0_resize_box_3.png /blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/logs.png" src=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/logs.png alt="NetDoc logs" class="img-fluid rounded shadow mx-auto d-block text-center"></a></p><h2 id=l2-network-topology>L2 Network topology</h2><p>Using CDP and LLDP NetDoc can discover L2 adjacencies. For each adjacency a cable is created:</p><p><a data-fancybox=gallery href=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/cables.png><img sizes="800 900 " srcset="/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/cables_hu6811f88e3450aff5565595c1927bcaf0_39417_800x0_resize_box_3.png /blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/cables.png" src=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/cables.png alt="NetDoc cables" class="img-fluid rounded shadow mx-auto d-block text-center"></a></p><p>Using the plugin <a href=https://github.com/mattieserver/netbox-topology-views title=netbox-topologyi-views>netbox-topologyi-views</a> we can automatically draw L2 topologies. Each device can be associated with a specific image using the <code>Device Role</code> attribute. Device roles must be created with one of the following slugs:</p><ul><li>access-switch</li><li>backup</li><li>core-switch</li><li>distribution-switch</li><li>firewall</li><li>internal-switch</li><li>isp-cpe-material</li><li>non-racked-devices</li><li>power-units</li><li>role-unknown</li><li>router</li><li>server</li><li>storage</li><li>wan-network</li><li>wireless-ap</li></ul><p>Opening <code>Plugins</code> -> <code>Topology Views</code> we can see a L2 topology diagram:</p><p><a data-fancybox=gallery href=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/l2-topology.png><img sizes="500 586 " srcset="/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/l2-topology_huc9c43fa22a1ace167290188c979a83da_75706_500x0_resize_box_3.png /blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/l2-topology.png" src=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/l2-topology.png alt="L2 topology" class="img-fluid rounded shadow mx-auto d-block text-center"></a></p><p>netbox-topology-views is currently working on netbox 3.2 only.</p><h2 id=l3-network-topology>L3 Network topology</h2><p>During my network assessment I need to draw L3 topology diagrams too. I forked <a href=https://github.com/mattieserver/netbox-topology-views title=netbox-topologyi-views>netbox-topologyi-views</a>, implementing the feature I need:</p><p><a data-fancybox=gallery href=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/l3-topology.png><img sizes="800 853 " srcset="/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/l3-topology_hu44d0c1749509f55fe0117267ed64cb1e_124832_800x0_resize_box_3.png /blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/l3-topology.png" src=/blog/2022/08/28/netdoc-automated-network-discovery-and-documentation/l3-topology.png alt="L3 topology" class="img-fluid rounded shadow mx-auto d-block text-center"></a></p><p>The L3 diagram is VRF aware: you need to manually update VRF on Prefixes (and you would also to update IP Addresses too).</p><h2 id=conclusions>Conclusions</h2><p>NetDoc is in the alpha version. Currently supports Cisco devices only but can be extended. Even if it is alpha software, it is saving me a lot of time.</p><p>If you want to contribute, drop me a message. I don&rsquo;t consider myself a software developer and there are (for sure) a lot of bugs.</p><h2>References</h2><ul><li><a href=https://docs.netbox.dev/en/stable/ title=Netbox target=_blank rel=noopener>Netbox</a></li><li><a href=https://github.com/dainok/netdoc title=NetDoc target=_blank rel=noopener>NetDoc</a></li><li><a href=https://github.com/ktbyers/netmiko title=Netmiko target=_blank rel=noopener>Netmiko</a></li><li><a href=https://github.com/networktocode/ntc-templates title=ntc-templates target=_blank rel=noopener>ntc-templates</a></li><li><a href=https://github.com/mattieserver/netbox-topology-views title=netbox-topologyi-views target=_blank rel=noopener>netbox-topologyi-views</a></li></ul></div></div></article><div class=clear></div></div></div></div></div></div></div></main><footer class=d-print-none><div class=footer-profile><div class=container id=contact><div class=row><div class="col-xs-12 col-sm-12 col-md-4"><div class=footer-head><h2><span>Andrea</span> Dainese</h2></div><p>For information, collaborations, proposals, requests for help, donations, use one of the following channels; email is preferred.</p><div class=footer-icons><ul><li><a href=https://www.patreon.com/adainese title="Support me" target=_blank rel=noreferrer><i class="fa fa-heart"></i></a></li><li><a href=https://www.linkedin.com/in/adainese/ title="LinkedIn profile" target=_blank rel=noreferrer><i class="fab fa-linkedin-in"></i></a></li><li><a href=https://twitter.com/adainese title="Twitter profile" target=_blank rel=noreferrer><i class="fab fa-twitter"></i></a></li><li><a href=mailto:andrea@adainese.it title="Secure email" target=_blank rel=noreferrer><i class="fa fa-envelope"></i></a></li><li><a href=https://www.spreaker.com/podcast/info-sec-unplugged--6025156 title=Podcast target=_blank rel=noreferrer><i class="fa fa-podcast"></i></a></li><li><a href=https://github.com/dainok/ title="GitHub repositories" target=_blank rel=noreferrer><i class="fab fa-github"></i></a></li><li><a href=/blog/index.xml title="RSS Feed" target=_blank><i class="fa fa-rss"></i></a></li></ul></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class=footer-head><h4>Past events</h4></div><div class=footer-content><ul><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20240305-cisco-aci-automation.pdf title="View slides" target=_blank rel=noreferrer>SDN: Software Defined Now</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20231122-cybercrime.pdf title="View slides" target=_blank rel=noreferrer>Cybercrime</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20220901-bgp-attack-scenarios.pdf title="View slides" target=_blank rel=noreferrer>BGP attack scenarios</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20220317-approaching-ot-ics-security.pdf title="View slides" target=_blank rel=noreferrer>Approaching OT/ICS Security</a> (with <a href=https://www.festocte.it/eventi/industry_4_0/17-03-2022/webinar_la_cybersecurity_nelle_reti_di_fabbrica_P/>Festo Academy</a>)</li><li><a href="https://www.youtube.com/watch?v=sjQZghTkHkA" title="View recording" target=_blank rel=noreferrer><i class="fa fa-video"></i></a>&nbsp;-&nbsp;<a href=/files/slides/20200922-cyberrange.pdf title="View slides" target=_blank rel=noreferrer>Cyber Range: Analyzing a Cyber Attack</a></li><li><a href="https://www.youtube.com/watch?v=-PWtGaS28dk" title="View recording" target=_blank rel=noreferrer><i class="fa fa-video"></i></a>&nbsp;-&nbsp;<a href=/files/slides/20200623-clubitfvg-securing-ot-ics-plants.pdf title="View slides" target=_blank rel=noreferrer>Securing OT/ICS plants</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20190226-automation-for-cisco-netops.pdf title="View slides" target=_blank rel=noreferrer>Automation for Cisco NetOps</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20181107-ciscon-sdn-complexity-and-tco-looking-for-an-easy-way.pdf title="View slides" target=_blank rel=noreferrer>SDN, Complexity and TCO</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20181003-nts-protection-and-visibility-for-enterprise-networks.pdf title="View slides" target=_blank rel=noreferrer>Protection and visibility for enterprise networks</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20141106-festival-ict-why-wan-accelerators-still-matter.pdf title="View slides" target=_blank rel=noreferrer>Why WAN AccelerAtors (still) matter?</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20130918-festival-ict-designing-an-hybrid-data-center-infrastructure.pdf title="View slides" target=_blank rel=noreferrer>Designing an Hybrid Data Center Infrastructure</a></li></ul></div></div><div class="d-none d-md-block col-md-4"><div class=footer-head><h4>Competencies</h4></div><div class=footer-slides><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/security-125x100.webp alt="Incident Response"><div class=overlay>Incident Response</div></div></div><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/ciso-125x100.webp alt=Advisor><div class=overlay>Advisor</div></div></div><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/osint-125x100.webp alt="Open Source Intelligence (OSINT)"><div class=overlay>Open Source Intelligence (OSINT)</div></div></div><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/infrastructure-125x100.webp alt="System Integration / Automation"><div class=overlay>System Integration / Automation</div></div></div><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/writeup-125x100.webp alt="Training / Education / Cyber Range"><div class=overlay>Training / Education / Cyber Range</div></div></div><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/personal-security-125x100.webp alt="Personal Security"><div class=overlay>Personal Security</div></div></div></div></div></div></div></div><div class=footer-copyright><div class=container><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class=text-center>&copy; Copyright <strong>Andrea Dainese</strong>. All Rights Reserved</div><div class=text-center>Designed by <a href=https://bootstrapmade.com/ title=BootstrapMade target=_blank rel=noreferrer>BootstrapMade</a></div></div></div></div></div></footer><script src=/plugins/jquery/jquery.min.js></script>
<script src=/plugins/bootstrap/js/bootstrap.min.js></script>
<script src=/plugins/fancybox/jquery.fancybox.min.js></script>
<script src=/plugins/goodshare/goodshare.min.js></script>
<script src=/plugins/fuse/fuse.min.js></script>
<script src=/plugins/jquery-mark/jquery.mark.min.js></script>
<script src=/js/main.js></script>
<script src=/js/search.js></script></body></html>