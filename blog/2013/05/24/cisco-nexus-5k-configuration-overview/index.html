<!doctype html><html lang=en><head><meta name=google-site-verification content="NTPifZ1gNpp6HSoC60ErvHiUUor86ZXg4yHtlpk9lwU"><title>Andrea Dainese > Cisco Nexus 5k configuration overview</title><meta charset=utf-8><meta name=author content="Andrea Dainese"><meta name=description content="This article will show a list of activities to basically configure a Cisco Nexus 5000 switch. This is not an advanced configuration article, just an overview of basic configuration. People new to Cisco Nexus switches will be displaced by three features/commands:"><meta name=generator content="Hugo 0.115.3"><meta name=“robots” content="“noarchive”"><meta name=“robots” content="“notranslate”"><meta name=robots content="noimageindex"><meta property="og:title" content="Cisco Nexus 5k configuration overview"><meta property="og:description" content="This article will show a list of activities to basically configure a Cisco Nexus 5000 switch. This is not an advanced configuration article, just an overview of basic configuration. People new to Cisco Nexus switches will be displaced by three features/commands:"><meta property="og:type" content="article"><meta property="og:url" content="https://www.adainese.it/blog/2013/05/24/cisco-nexus-5k-configuration-overview/"><meta property="og:image" content="https://www.adainese.it/images/vendors/cisco.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2013-05-24T00:00:00+00:00"><meta property="article:modified_time" content="2013-05-24T00:00:00+00:00"><meta property="og:site_name" content="Andrea Dainese"><meta name=twitter:card content="summary"><meta name=twitter:site content="@adainese"><meta name=twitter:image content="https://www.adainese.it/images/vendors/cisco.png"><meta name=twitter:title content="Andrea Dainese > Cisco Nexus 5k configuration overview"><meta name=twitter:description content="This article will show a list of activities to basically configure a Cisco Nexus 5000 switch. This is not an advanced configuration article, just an overview of basic configuration. People new to Cisco Nexus switches will be displaced by three features/commands:"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate type=application/rss+xml title="RSS Feed for blog" href=/blog/index.xml><link rel=dns-prefetch href=https://www.googletagmanager.com><link href=https://www.googletagmanager.com rel=preconnect crossorigin><link rel=apple-touch-icon sizes=57x57 href=/favicon/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/favicon/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/favicon/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/favicon/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/favicon/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/favicon/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/favicon/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/favicon/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-192x192.png><link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon/favicon-96x96.png><link rel=stylesheet type=text/css href=/plugins/fontawesome/css/all.min.css><link rel=stylesheet type=text/css href=/plugins/fancybox/jquery.fancybox.min.css><link rel=stylesheet type=text/css href=/fonts/opensans/opensans.css><link rel=stylesheet href=/css/style.min.db8a68dfac8ad6ed301e5f04872a83daee269833ef371fd9ec9475b745de14e5.css integrity="sha256-24po36yK1u0wHl8EhyqD2u4mmDPvNx/Z7JR1t0XeFOU="><link rel=stylesheet href=/css/print.min.a3802e6b39df8780c4980151b47550b34687a140e148c71342fb463b5322e6b1.css media=print integrity="sha256-o4Auaznfh4DEmAFRtHVQs0aHoUDhSMcTQvtGO1Mi5rE="></head><body><button type=button class="mobile-nav-toggle d-lg-none" aria-label="Toggle navigation"><i class="fas fa-bars"></i></button><header id=header class=fixed-top><div class="container d-flex"><div class="logo mr-auto"><h1><a href=/#><span>Andrea</span> Dainese</a></h1></div><nav class="nav-menu d-none d-lg-block"><ul><li><a href=/#>Home</a></li><li><a href=/#about>About</a></li><li class=active><a href=/blog>Blog</a></li><li><a href=/categories>Categories</a></li><li><a href=https://www.patreon.com/adainese target=_blank rel=noreferrer><i class="fa fa-heart"></i></a></li><li><a href=https://www.spreaker.com/podcast/info-sec-unplugged--6025156 target=_blank rel=noreferrer><i class="fa fa-podcast"></i></a></li><li><form class="form-inline ml-2" action=/search><div class="input-group mb-3"><input id=search-query type=text class=form-control placeholder=Search... name=s aria-label="Search within the website" aria-describedby=basic-addon2><div class=input-group-append><button class="btn btn-outline-primary" type=submit aria-label=Search>
<i class="fa fa-search"></i></button></div></div></form></li></ul></nav></div></header><div id=page-header><div class=home-overlay></div><div class=container><div class=row><div class=col-12><div class="page-header-size text-center"><h1>Cisco Nexus 5k configuration overview</h1></div></div></div></div></div><main id=main><div class=blogpost-single><div class=container><div class=row><div class="col-xs-12 col-sm-12 col-md-4 d-print-none"><div class=blogpost-nav><div class="d-none d-md-block"><div class=blogpost-nav-content><h4>Table of contents</h4><div class=toce><nav id=TableOfContents><ul><li><a href=#basic-connectivity>Basic connectivity</a></li><li><a href=#disabling-telnet-server>Disabling Telnet Server</a></li><li><a href=#ntp>NTP</a></li><li><a href=#syslog>Syslog</a></li><li><a href=#radius-authentication>RADIUS Authentication</a></li><li><a href=#call-home>Call Home</a></li><li><a href=#snmp>SNMP</a></li><li><a href=#jumbo-frame-mtu-9216>Jumbo Frame (MTU 9216)</a></li><li><a href=#fabric-extender-pre-provisioning>Fabric Extender pre-provisioning</a></li><li><a href=#vpc>vPC</a></li><li><a href=#references>References</a></li></ul></nav></div></div></div><div class="d-none d-md-block"><div class=blogpost-nav-content><h4>Latest posts</h4><div class=recent-post><div class=recent-post-img><a href=/blog/2025/10/05/creating-an-interface-in-strata-cloud-manager/><img class="img-fluid rounded" src=/images/vendors/paloalto.webp alt="Post cover"></a></div><div class=recent-post-content><p><a href=/blog/2025/10/05/creating-an-interface-in-strata-cloud-manager/>Creating an interface in Strata Cloud Manager</a><br><i class="fa fa-calendar"></i>
October 05, 2025</p></div></div><div class=recent-post><div class=recent-post-img><a href=/blog/2025/10/01/circular-dependencies-with-ndo/><img class="img-fluid rounded" src=/images/categories/learning-paths.webp alt="Post cover"></a></div><div class=recent-post-content><p><a href=/blog/2025/10/01/circular-dependencies-with-ndo/>Circular Dependencies with NDO</a><br><i class="fa fa-calendar"></i>
October 01, 2025</p></div></div><div class=recent-post><div class=recent-post-img><a href=/blog/2025/09/28/modifying-an-object-in-strata-cloud-manager/><img class="img-fluid rounded" src=/images/vendors/paloalto.webp alt="Post cover"></a></div><div class=recent-post-content><p><a href=/blog/2025/09/28/modifying-an-object-in-strata-cloud-manager/>Modifying an object in Strata Cloud Manager</a><br><i class="fa fa-calendar"></i>
September 28, 2025</p></div></div><div class=recent-post><div class=recent-post-img><a href=/blog/2025/09/24/from-single-site-to-multi-site-with-ndo/><img class="img-fluid rounded" src=/images/categories/learning-paths.webp alt="Post cover"></a></div><div class=recent-post-content><p><a href=/blog/2025/09/24/from-single-site-to-multi-site-with-ndo/>From Single-Site to Multi-Site with NDO</a><br><i class="fa fa-calendar"></i>
September 24, 2025</p></div></div><div class=recent-post><div class=recent-post-img><a href=/blog/2025/09/21/retrieving-firewall-interfaces-with-strata-cloud-manager/><img class="img-fluid rounded" src=/images/vendors/paloalto.webp alt="Post cover"></a></div><div class=recent-post-content><p><a href=/blog/2025/09/21/retrieving-firewall-interfaces-with-strata-cloud-manager/>Retrieving firewall interfaces with Strata Cloud Manager</a><br><i class="fa fa-calendar"></i>
September 21, 2025</p></div></div></div></div><div class="d-none d-md-block"><div class=blogpost-nav-content><h4>Categories</h4><div class=recent-post><div class=recent-post-img><a href=/categories/automation><img class="img-fluid rounded" src=/images/categories/automation.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/automation>Automation</a><br><i class="fa fa-blog"></i> 160 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/learning-paths><img class="img-fluid rounded" src=/images/categories/learning-paths.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/learning-paths>Learning paths</a><br><i class="fa fa-blog"></i> 124 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/ciso><img class="img-fluid rounded" src=/images/categories/ciso.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/ciso>CISO</a><br><i class="fa fa-blog"></i> 23 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/personal-security><img class="img-fluid rounded" src=/images/categories/personal-security.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/personal-security>Personal Security</a><br><i class="fa fa-blog"></i> 22 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/security><img class="img-fluid rounded" src=/images/categories/security.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/security>Security</a><br><i class="fa fa-blog"></i> 20 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/notes><img class="img-fluid rounded" src=/images/categories/notes.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/notes>Notes</a><br><i class="fa fa-blog"></i> 19 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/infrastructure><img class="img-fluid rounded" src=/images/categories/infrastructure.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/infrastructure>Infrastructure</a><br><i class="fa fa-blog"></i> 12 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/ot-ics><img class="img-fluid rounded" src=/images/categories/ot-ics.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/ot-ics>OT/ICS</a><br><i class="fa fa-blog"></i> 5 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/books><img class="img-fluid rounded" src=/images/categories/books.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/books>Books</a><br><i class="fa fa-blog"></i> 3 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/unetlab><img class="img-fluid rounded" src=/images/categories/unetlab.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/unetlab>UNetLab</a><br><i class="fa fa-blog"></i> 3 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/writeup><img class="img-fluid rounded" src=/images/categories/writeup.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/writeup>Write-up</a><br><i class="fa fa-blog"></i> 3 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/osint><img class="img-fluid rounded" src=/images/categories/osint.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/osint>OSInt</a><br><i class="fa fa-blog"></i> 2 posts</p></div></div><div class=recent-post><div class=recent-post-img><a href=/categories/life><img class="img-fluid rounded" src=/images/categories/life.webp alt="Category cover"></a></div><div class=recent-post-content><p><a href=/categories/life>My life</a><br><i class="fa fa-blog"></i> 1 posts</p></div></div></div></div></div></div><div class="col-xs-12 col-sm-12 col-md-8 blogpost-container"><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><article><div class=blogpost-single-content><h2>Cisco Nexus 5k configuration overview</h2><div class=blogpost-single-meta><div><i class="fa fa-user"></i> Andrea Dainese</div><div><i class="fa fa-calendar"></i>
May 24, 2013</div><div class=tag-meta><i class="fa fa-folder"></i>
<a href=/categories/infrastructure/ title="All posts under Infrastructure">Infrastructure</a></div></div><div class=entry-content><div><a data-fancybox=gallery href=/images/vendors/cisco.webp><img class="img-fluid w-25 rounded shadow float-right" src=/images/vendors/cisco.webp alt="Post cover"></a></div><p>This article will show a list of activities to basically configure a Cisco Nexus 5000 switch. This is not an advanced configuration article, just an overview of basic configuration.
People new to Cisco Nexus switches will be displaced by three features/commands:</p><ul><li>license (not covered in this article): Nexus Switch features are now licensed, as Fiber-Channel switches always were.</li><li>feature: specific features must be enabled (loaded). Examples are: lacp, lldp, fex, vtp&mldr;</li><li>vrf: VRFs are used by default. A management VRF exists and must be used for management purposes</li></ul><h2 id=basic-connectivity>Basic connectivity</h2><p>The first difference between a Catalyst switch and a Nexus switch is that Nexus use VRF by default. A management VRF exists and should be used for all management traffic:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>hostname nexus5596-01
</span></span><span style=display:flex><span>interface mgmt0
</span></span><span style=display:flex><span>  ip address 10.1.12.6/24
</span></span><span style=display:flex><span>vrf context management
</span></span><span style=display:flex><span>  ip domain-name example.com
</span></span><span style=display:flex><span>  ip name-server 10.1.7.8 10.1.7.9
</span></span><span style=display:flex><span>  ip route 0.0.0.0/0 10.1.12.1
</span></span></code></pre></div><h2 id=disabling-telnet-server>Disabling Telnet Server</h2><p>SSH server is enabled by default. Telnet server can be disabled login through SSH and removing telnet feature:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>no feature telnet
</span></span></code></pre></div><p>Any telnet user will be disconnected.</p><h2 id=ntp>NTP</h2><p>NTP is simple enough, just remember to use the right VRF:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>clock timezone CET 1 0
</span></span><span style=display:flex><span>clock summer-time CEST 5 Sun Mar 02:00 5 Sun Oct 03:00 60
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ntp server ntp1.example.com use-vrf management
</span></span><span style=display:flex><span>ntp server ntp2.example.com prefer use-vrf management
</span></span></code></pre></div><p>Check the configuration with the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>show ntp peer-status
</span></span></code></pre></div><h2 id=syslog>Syslog</h2><p>Cisco Nexus switches can log through a Syslog server. Link and Trunk status change alerts are enabled:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>logging event link-status enable
</span></span><span style=display:flex><span>logging event trunk-status enable
</span></span><span style=display:flex><span>logging server syslog.example.com 6 facility local5 use-vrf management
</span></span></code></pre></div><h2 id=radius-authentication>RADIUS Authentication</h2><p>A couple of Radius servers are configured to allow centralized authentication through Windows Active Directory. First, define Radius servers, then define a Radius authentication group method:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>radius-server host radius1.example.com key radiuspsk authentication accounting timeout 5
</span></span><span style=display:flex><span>radius-server host radius2.example.com key radiuspsk authentication accounting timeout 5
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>aaa group server radius RADIUS-AUTH
</span></span><span style=display:flex><span>    server radius1.example.com
</span></span><span style=display:flex><span>    server radius2.example.com
</span></span><span style=display:flex><span>    deadtime 5
</span></span><span style=display:flex><span>    use-vrf management
</span></span></code></pre></div><p>Again, management VRF is used. The Radius authentication can be tested:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>test aaa group RADIUS-AUTH example\user password
</span></span></code></pre></div><p>Authentication method can be configured to use the group method (Radius) configured above:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>aaa authentication login error-enable
</span></span><span style=display:flex><span>aaa authentication login console local
</span></span><span style=display:flex><span>aaa authentication login default group RADIUS-AUTH
</span></span><span style=display:flex><span>aaa accounting default group RADIUS-AUTH
</span></span><span style=display:flex><span>username example\user role network-admin
</span></span></code></pre></div><p>A Radius request is in the form:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Packet-Type = Access-Request
</span></span><span style=display:flex><span>User-Name = &#34;example\\user&#34;
</span></span><span style=display:flex><span>NAS-Port-Type = Virtual
</span></span><span style=display:flex><span>NAS-Port = 3000
</span></span><span style=display:flex><span>NAS-IP-Address = 10.1.12.6
</span></span></code></pre></div><p>Users allowed to log in to NAS-Port-Type Virtual will successfully authenticate to the Nexus Switch. By default, all authenticated users will have unprivileged access. To raise privileges each user must be configured inside the Nexus switch:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>username example\user role network-admin
</span></span></code></pre></div><p>The same privilege can be set from Radius itself using a Cisco attribute:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Cisco-AVPair = &#34;shell:priv-lvl=15&#34;
</span></span><span style=display:flex><span>Cisco-AVPair = &#34;shell:roles=network-admin&#34;
</span></span></code></pre></div><p>The first one is used by IOS devices, the last one is used by NX-OS devices.</p><p>The NX-OS supported fallback method for authentication is that if all the AAA remote RADIUS or TACACS+ servers are unreachable, then the login attempts to authenticate the SSH/Telnet user locally.</p><p>Adding the second attribute can break the login process on some Catalyst switches. This happens because the second attribute is unknown to Catalyst switches but it is received as mandatory:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>000327: May 24 14:52:14.172: AAA/AUTHOR/EXEC: Processing AV service=shell
</span></span><span style=display:flex><span>000328: May 24 14:52:14.172: AAA/AUTHOR/EXEC: Processing AV cmd*
</span></span><span style=display:flex><span>000329: May 24 14:52:14.172: AAA/AUTHOR/EXEC: Processing AV priv-lvl=15
</span></span><span style=display:flex><span>000330: May 24 14:52:14.172: AAA/AUTHOR/EXEC: Processing AV roles=network-admin
</span></span><span style=display:flex><span>000331: May 24 14:52:14.172: AAA/AUTHOR/EXEC: received unknown mandatory AV: roles=network-admin
</span></span><span style=display:flex><span>000332: May 24 14:52:14.176: AAA/AUTHOR/EXEC: Authorization FAILED
</span></span></code></pre></div><p>To solve this just turn the second attribute from mandatory to optional with &ldquo;*&rdquo; rather than &ldquo;=&rdquo;:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Cisco-AVPair = &#34;shell:priv-lvl=15&#34;
</span></span><span style=display:flex><span>Cisco-AVPair = &#34;shell:roles*network-admin&#34;
</span></span></code></pre></div><h2 id=call-home>Call Home</h2><p>Call Home is a service to notify configurations/alerts by email.
The first step is define an SNMP contact:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>snmp-server contact noc@example.com
</span></span></code></pre></div><p>Then call home can be configured. The first step is define who is the maintainer of the switch:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>callhome
</span></span><span style=display:flex><span>  switch-priority 3
</span></span><span style=display:flex><span>  site-id Padova
</span></span><span style=display:flex><span>  email-contact noc@example.com
</span></span><span style=display:flex><span>  phone-contact +391234567890
</span></span><span style=display:flex><span>  streetaddress st. example, 7
</span></span></code></pre></div><p>Then a profile can be configured. A profile defines who and how to receive email notifications:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>callhome
</span></span><span style=display:flex><span>  destination-profile Example
</span></span><span style=display:flex><span>  destination-profile Example format full-txt
</span></span><span style=display:flex><span>  destination-profile Example email-addr noc@example.com
</span></span><span style=display:flex><span>  destination-profile Example alert-group all
</span></span></code></pre></div><p>The last step is define how emails can be sent:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>callhome
</span></span><span style=display:flex><span>  transport email smtp-server smtp.example.com port 25 use-vrf management
</span></span><span style=display:flex><span>  transport email from nexus5596-01@example.com
</span></span><span style=display:flex><span>  enable
</span></span></code></pre></div><p>Finally, test the call-home configuration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>callhome test inventory
</span></span></code></pre></div><h2 id=snmp>SNMP</h2><p>SNMP configuration is very easy:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>snmp-server contact noc@example.com
</span></span><span style=display:flex><span>snmp-server location st. example, 7 - Padova
</span></span><span style=display:flex><span>snmp-server host snmp1.example.com traps version 2c public
</span></span><span style=display:flex><span>snmp-server host snmp1.example.com traps version 2c public
</span></span><span style=display:flex><span>snmp-server enable traps config
</span></span><span style=display:flex><span>snmp-server enable trap link
</span></span><span style=display:flex><span>snmp-server enable trap callhome
</span></span><span style=display:flex><span>snmp-server community public ro
</span></span><span style=display:flex><span>snmp-server source-interface traps mgmt 0
</span></span></code></pre></div><h2 id=jumbo-frame-mtu-9216>Jumbo Frame (MTU 9216)</h2><p>Jumbo frame is a feature requested when iSCSI/NFS/FCoE protocols are used. There are many opinions pros and cons about performance with or without Jumbo frames under iSCSI and NFS protocols. Jumbo frame is a requirement when FCoE is used because an FC frame is about 2k in length.</p><p>Enabling Jumbo frames does not require a reboot:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>policy-map type network-qos jumbo
</span></span><span style=display:flex><span>  class type network-qos class-default
</span></span><span style=display:flex><span>    mtu 9216
</span></span><span style=display:flex><span>system qos
</span></span><span style=display:flex><span>  service-policy type network-qos jumbo
</span></span></code></pre></div><p>Check the current MTU supported on interfaces using the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>show queuing interface Ethernet1/47
</span></span><span style=display:flex><span>[...]
</span></span><span style=display:flex><span>    q-size: 470080, HW MTU: 9216 (9216 configured)
</span></span></code></pre></div><h2 id=fabric-extender-pre-provisioning>Fabric Extender pre-provisioning</h2><p>In a Nexus 5K migration, one or more N2K can be pre-provisioned and pre-configured:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>feature fex
</span></span><span style=display:flex><span>slot 100
</span></span><span style=display:flex><span>  provision model N2K-C2232P
</span></span></code></pre></div><p>In the example the FEX will be connected to a port channel on Ethernet1/46-47 ports:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>interface Ethernet1/46
</span></span><span style=display:flex><span>  channel-group 100
</span></span><span style=display:flex><span>interface Ethernet1/47
</span></span><span style=display:flex><span>  channel-group 100
</span></span><span style=display:flex><span>inrerface port-channel101
</span></span><span style=display:flex><span>  switchport mode fex-fabric
</span></span><span style=display:flex><span>  fex associate 101
</span></span></code></pre></div><p>Now there will be 32 Ethernet interfaces under slot 100 (Ethernet100/1/1-32).</p><h2 id=vpc>vPC</h2><p>A vPC configuration needs to define a vPC keepalive link, a vPC peer link, and two vPC peer switches to form a vPC domain. A vPC domain includes vPC port-channel to the downstream devices.</p><p>A vPC keepalive session is established using the management interface:</p><p>A vPC domain includes both vPC switches, the vPC peer link,</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>feature vpc
</span></span><span style=display:flex><span>vpc domain 96
</span></span><span style=display:flex><span>  role priority 4096
</span></span><span style=display:flex><span>  peer-keepalive destination 10.1.12.7
</span></span></code></pre></div><p>A vPC peer link must be configured using a port-channel and two 10GbE interfaces at least:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>interface Ethernet1/47 - 48
</span></span><span style=display:flex><span>  switchport mode trunk
</span></span><span style=display:flex><span>  channel-group 1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>interface port-channel1
</span></span><span style=display:flex><span>  switchport mode trunk
</span></span><span style=display:flex><span>  spanning-tree port type network
</span></span><span style=display:flex><span>  vpc peer-link
</span></span></code></pre></div><p>A vPC (downstream) link must be configured using port channel on both switches, even if only one interface is bounded in each switch:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>interface Ethernet1/1
</span></span><span style=display:flex><span>  switchport mode trunk
</span></span><span style=display:flex><span>  channel-group 2 mode active
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>interface port-channel2
</span></span><span style=display:flex><span>  switchport mode trunk
</span></span><span style=display:flex><span>  vpc 2
</span></span></code></pre></div><p>The port-channel must configure a unique VPC ID, in the above example, the port-channel ID is used for VPC ID also.</p><h2 id=references>References</h2><ul><li><a href=http://lostintransit.se/2013/04/30/introduction-to-nx-os-basic-system-setup/ title="Introduction to NX-OS &amp;ndash; Basic system setup" target=_blank rel=noopener>Introduction to NX-OS – Basic system setup</a></li><li><a href=http://www.cisco.com/en/US/prod/collateral/switches/ps9441/ps9670/configuration_guide_c07-543563.html title="Virtual PortChannel Quick Configuration Guide" target=_blank rel=noopener>Virtual PortChannel Quick Configuration Guide</a></li><li><a href=http://www.cisco.com/en/US/docs/switches/datacenter/nexus5000/sw/configuration/guide/cli/sec_radius.html#wp1300212 title="Configuring RADIUS" target=_blank rel=noopener>Configuring RADIUS</a></li><li><a href=http://www.cisco.com/en/US/docs/switches/datacenter/sw/5_x/nx-os/system_management/configuration/guide/sm_6callhome.html title="Configuring Smart Call Home" target=_blank rel=noopener>Configuring Smart Call Home</a></li><li><a href=http://www.cisco.com/en/US/products/ps9670/products_configuration_example09186a0080b44116.shtml title="Configuration of Jumbo MTU on Nexus 5000 and 7000 Series" target=_blank rel=noopener>Configuration of Jumbo MTU on Nexus 5000 and 7000 Series</a></li><li><a href=http://www.cisco.com/en/US/prod/collateral/switches/ps9441/ps9670/C07-572834-00_STDG_NX-OS_vPC_DG.pdf title="Spanning Tree Design Guidelines for Cisco NX-OS Software and Virtual PortChannels" target=_blank rel=noopener>Spanning Tree Design Guidelines for Cisco NX-OS Software and Virtual PortChannels</a></li><li><a href=http://www.cisco.com/en/US/docs/ios/12_2/security/configuration/guide/scfrdat3.html title="RADIUS Vendor-Specific Attributes and RADIUS Disconnect-Cause Attribute Values" target=_blank rel=noopener>RADIUS Vendor-Specific Attributes and RADIUS Disconnect-Cause Attribute Values</a></li></ul></div></div></article><div class=clear></div></div></div></div></div></div></div></main><footer class=d-print-none><div class=footer-profile><div class=container id=contact><div class=row><div class="col-xs-12 col-sm-12 col-md-4"><div class=footer-head><h2><span>Andrea</span> Dainese</h2></div><p>For information, collaborations, proposals, requests for help, donations, use one of the following channels; email is preferred.</p><div class=footer-icons><ul><li><a href=https://www.patreon.com/adainese title="Support me" target=_blank rel=noreferrer><i class="fa fa-heart"></i></a></li><li><a href=https://www.linkedin.com/in/adainese/ title="LinkedIn profile" target=_blank rel=noreferrer><i class="fab fa-linkedin-in"></i></a></li><li><a href=https://twitter.com/adainese title="Twitter profile" target=_blank rel=noreferrer><i class="fab fa-twitter"></i></a></li><li><a href=mailto:andrea@adainese.it title="Secure email" target=_blank rel=noreferrer><i class="fa fa-envelope"></i></a></li><li><a href=https://www.spreaker.com/podcast/info-sec-unplugged--6025156 title=Podcast target=_blank rel=noreferrer><i class="fa fa-podcast"></i></a></li><li><a href=https://github.com/dainok/ title="GitHub repositories" target=_blank rel=noreferrer><i class="fab fa-github"></i></a></li><li><a href=/blog/index.xml title="RSS Feed" target=_blank><i class="fa fa-rss"></i></a></li></ul></div></div><div class="col-xs-12 col-sm-12 col-md-4"><div class=footer-head><h4>Past events</h4></div><div class=footer-content><ul><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20240305-cisco-aci-automation.pdf title="View slides" target=_blank rel=noreferrer>SDN: Software Defined Now</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20231122-cybercrime.pdf title="View slides" target=_blank rel=noreferrer>Cybercrime</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20220901-bgp-attack-scenarios.pdf title="View slides" target=_blank rel=noreferrer>BGP attack scenarios</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20220317-approaching-ot-ics-security.pdf title="View slides" target=_blank rel=noreferrer>Approaching OT/ICS Security</a> (with <a href=https://www.festocte.it/eventi/industry_4_0/17-03-2022/webinar_la_cybersecurity_nelle_reti_di_fabbrica_P/>Festo Academy</a>)</li><li><a href="https://www.youtube.com/watch?v=sjQZghTkHkA" title="View recording" target=_blank rel=noreferrer><i class="fa fa-video"></i></a>&nbsp;-&nbsp;<a href=/files/slides/20200922-cyberrange.pdf title="View slides" target=_blank rel=noreferrer>Cyber Range: Analyzing a Cyber Attack</a></li><li><a href="https://www.youtube.com/watch?v=-PWtGaS28dk" title="View recording" target=_blank rel=noreferrer><i class="fa fa-video"></i></a>&nbsp;-&nbsp;<a href=/files/slides/20200623-clubitfvg-securing-ot-ics-plants.pdf title="View slides" target=_blank rel=noreferrer>Securing OT/ICS plants</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20190226-automation-for-cisco-netops.pdf title="View slides" target=_blank rel=noreferrer>Automation for Cisco NetOps</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20181107-ciscon-sdn-complexity-and-tco-looking-for-an-easy-way.pdf title="View slides" target=_blank rel=noreferrer>SDN, Complexity and TCO</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20181003-nts-protection-and-visibility-for-enterprise-networks.pdf title="View slides" target=_blank rel=noreferrer>Protection and visibility for enterprise networks</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20141106-festival-ict-why-wan-accelerators-still-matter.pdf title="View slides" target=_blank rel=noreferrer>Why WAN AccelerAtors (still) matter?</a></li><li><i class="fa fa-video-slash"></i>&nbsp;-&nbsp;<a href=/files/slides/20130918-festival-ict-designing-an-hybrid-data-center-infrastructure.pdf title="View slides" target=_blank rel=noreferrer>Designing an Hybrid Data Center Infrastructure</a></li></ul></div></div><div class="d-none d-md-block col-md-4"><div class=footer-head><h4>Competencies</h4></div><div class=footer-slides><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/security-125x100.webp alt="Incident Response"><div class=overlay>Incident Response</div></div></div><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/ciso-125x100.webp alt=Advisor><div class=overlay>Advisor</div></div></div><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/osint-125x100.webp alt="Open Source Intelligence (OSINT)"><div class=overlay>Open Source Intelligence (OSINT)</div></div></div><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/infrastructure-125x100.webp alt="System Integration / Automation"><div class=overlay>System Integration / Automation</div></div></div><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/writeup-125x100.webp alt="Training / Education / Cyber Range"><div class=overlay>Training / Education / Cyber Range</div></div></div><div class=footer-slide-container><div class=footer-slide><img src=/images/categories/personal-security-125x100.webp alt="Personal Security"><div class=overlay>Personal Security</div></div></div></div></div></div></div></div><div class=footer-copyright><div class=container><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class=text-center>&copy; Copyright <strong>Andrea Dainese</strong>. All Rights Reserved</div><div class=text-center>Designed by <a href=https://bootstrapmade.com/ title=BootstrapMade target=_blank rel=noreferrer>BootstrapMade</a></div></div></div></div></div></footer><script src=/plugins/jquery/jquery.min.js></script>
<script src=/plugins/bootstrap/js/bootstrap.min.js></script>
<script src=/plugins/fancybox/jquery.fancybox.min.js></script>
<script src=/plugins/goodshare/goodshare.min.js></script>
<script src=/plugins/fuse/fuse.min.js></script>
<script src=/plugins/jquery-mark/jquery.mark.min.js></script>
<script src=/js/main.js></script>
<script src=/js/search.js></script></body></html>